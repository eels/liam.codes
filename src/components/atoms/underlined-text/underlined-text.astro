---
import * as Classes from './styled';
import { isExternalURL } from '@src/utilities/url';
import type { AstroBuiltinAttributes } from 'astro/dist/@types/astro.d';

export interface Props extends AstroBuiltinAttributes {
  href?: string;
}

interface AdditionalLinkProps {
  rel?: string;
  target?: string;
}

const { 'class:list': classList, href, ...astroAttributes } = Astro.props;
const additionalLinkProps: AdditionalLinkProps = {};

if (!!href && isExternalURL(href)) {
  additionalLinkProps.rel = 'noopener noreferrer';
  additionalLinkProps.target = '_blank';
}

const Component = href ? 'a' : 'span';
---

<Component
  class:list={[Classes.Text({ isLink: href !== undefined }), classList]}
  href={href}
  {...additionalLinkProps}
  {...astroAttributes}
>
  <slot />
</Component>
